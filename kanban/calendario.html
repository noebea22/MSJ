<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Calendario de Tareas</title>
    <style>
      body {
        font-family: sans-serif;
        background: #f0f0f0;
        padding: 1rem;
        text-align: center;
      }
      .navegacion {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 10px;
        gap: 1rem;
      }
      .navegacion button {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
      }
      #mesActual {
        font-weight: bold;
        font-size: 1.2rem;
      }
      #calendario {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 5px;
        max-width: 900px;
        margin: auto;
      }
      .dia {
        background: white;
        border: 1px solid #ccc;
        min-height: 100px;
        padding: 5px;
        box-sizing: border-box;
        text-align: left;
      }
      .fecha {
        font-weight: bold;
        font-size: 0.9em;
        margin-bottom: 5px;
      }
      .inicio {
        color: #0077cc;
        font-weight: bold;
        font-size: 0.85em;
      }
      .fin {
        color: #cc0000;
        font-weight: bold;
        font-size: 0.85em;
      }
    </style>
  </head>
  <body>
    <div class="navegacion">
      <button onclick="cambiarMes(-1)">◀️</button>
      <div id="mesActual"></div>
      <button onclick="cambiarMes(1)">▶️</button>
    </div>

    <div id="calendario"></div>

    <script>
      const tareas = [
        {
          id: 1,
          titulo: "Definir requerimientos",
          estado: "Planificada",
          descripcion: "Reunión con cliente",
          inicio: "2026-04-01",
          fin: "2026-04-05",
        },
        {
          id: 2,
          titulo: "Diseño inicial",
          estado: "En progreso",
          descripcion: "Maqueta en Figma",
          inicio: "2025-04-02",
          fin: "2025-04-07",
        },
        {
          id: 3,
          titulo: "Desarrollo backend",
          estado: "En progreso",
          descripcion: "API con FastAPI",
          inicio: "2025-03-04",
          fin: "2025-03-10",
        },
        {
          id: 4,
          titulo: "Pruebas QA",
          estado: "Finalizada",
          descripcion: "Casos de prueba ejecutados",
          inicio: "2025-03-25",
          fin: "2025-03-30",
        },
        {
          id: 5,
          titulo: "Entrega final",
          estado: "Planificada",
          descripcion: "Enviar documentación",
          inicio: "2025-04-08",
          fin: "2025-04-12",
        },
      ];

      let fechaActual = new Date(); // Se modifica al navegar

      function renderizarCalendario() {
        const calendario = document.getElementById("calendario");
        calendario.innerHTML = "";

        const year = fechaActual.getFullYear();
        const month = fechaActual.getMonth(); // 0-11

        const meses = [
          "Enero",
          "Febrero",
          "Marzo",
          "Abril",
          "Mayo",
          "Junio",
          "Julio",
          "Agosto",
          "Septiembre",
          "Octubre",
          "Noviembre",
          "Diciembre",
        ];

        document.getElementById("mesActual").textContent = `${meses[month]}`;

        const inicioMes = new Date(year, month, 1);
        const finMes = new Date(year, month + 1, 0);
        const primerDiaSemana = inicioMes.getDay(); // 0 = domingo
        const diasDelMes = finMes.getDate();

        for (let i = 0; i < primerDiaSemana; i++) {
          const celda = document.createElement("div");
          celda.className = "dia";
          calendario.appendChild(celda);
        }

        for (let dia = 1; dia <= diasDelMes; dia++) {
          const celda = document.createElement("div");
          celda.className = "dia";

          const fechaStr = `${year}-${String(month + 1).padStart(
            2,
            "0"
          )}-${String(dia).padStart(2, "0")}`;
          const fechaLabel = `${String(dia).padStart(2, "0")}/${String(
            month + 1
          ).padStart(2, "0")}`;

          const fechaTitulo = document.createElement("div");
          fechaTitulo.className = "fecha";
          fechaTitulo.textContent = fechaLabel;
          celda.appendChild(fechaTitulo);

          tareas.forEach((t) => {
            if (fechaStr === t.inicio) {
              const tareaInicio = document.createElement("div");
              tareaInicio.className = "inicio";
              tareaInicio.textContent = `⇨ ${t.titulo}`;
              celda.appendChild(tareaInicio);
            }
            if (fechaStr === t.fin) {
              const tareaFin = document.createElement("div");
              tareaFin.className = "fin";
              tareaFin.textContent = `⇦ ${t.titulo}`;
              celda.appendChild(tareaFin);
            }
          });

          calendario.appendChild(celda);
        }
      }

      function cambiarMes(direccion) {
        fechaActual.setMonth(fechaActual.getMonth() + direccion);
        renderizarCalendario();
      }

      renderizarCalendario();
    </script>
  </body>
</html>
